\section{Introduction}

This document describes the work carried out within Task 5.2 in WP5 concerning the definition of several use cases considered in the project to show the overall functionalities of the system.
The use cases are organized in 5 scenarios where different capabilities of the system are demonstrated. Each scenario contains multiple use cases.

The scenarios and a general description of the use cases are given in Section \ref{sec:usecases}, while Section \ref{sec:demo} contains a description of the test facility in Caen.
Finally, in Section \ref{sec:usecase_sapienza} we provide a detailed description of some of the use cases that are more related with short-term human-robot interaction and safe navigation, which are the activities of the project led by Sapienza University.


\input{usecases}

\input{demo}




\section{Use cases for short-term interaction and safe navigation}
\label{sec:usecase_sapienza}

As described in the previous sections,
COACHES project envisages the implementation of a set of use cases
to show the feasibility of the approach and to assess the effectiveness
of the proposed solutions with actual users.

Four use cases that are mainly related with short-term human-robot interaction and safe navigation are described in the following. These use cases correspond to the ones in Scenarios 4 and 5 described above\footnote{Use Case 5.2 is not reported in details here since it is similar to Use Case 4.1.}.
Other use cases illustrated before can be considered as preliminary tests to the ones described in this section. Therefore, we report here in details only the most complex ones.

For each use case, the following data are provided:
\begin{itemize}
\item A brief textual description;
\item One (or more) sequence diagrams;
\item An optimistic sequence of actions.
\end{itemize}

Furthermore, a detailed overview of the preconditions and post-conditions for each action executed by the robots is given in Section \ref{sec:robot_actions}.


\subsection{Use Case 4.1: Customer asks for help carrying his/her bag}

The objective of this use case is to highlight the social awareness
of the robot in the completion of a given task. There are many ways
to carry a bag for a customer, but only a few might be socially acceptable
at a given moment. To perform well, the robot asks the customer about her/his priorities.

\subsubsection{Use case description}

The robot is called by a shop manager (or by a customer) to help
in carrying bags. Bag loading operations take place in dedicated areas,
located at the exit of the shops.
The robot has to
\begin{enumerate}
\item Reach the exit of the shop;
\item Approach the dedicated bag loading area.
\end{enumerate}

\noindent When in position, the robot waits for the customer to establish
a contact.
Once the customer has established a contact, the robot asks the user
to load the bag in the bin carried by the robot.
Once the bag is loaded, the robot asks the customer if she/he is in a hurry.
If the customer is in a hurry, the robot
\begin{enumerate}
\item sets its speed to a high value;
\item proceeds to the mall parking lot.
\end{enumerate}

\noindent In the other case, the robot
\begin{enumerate}
\item sets its speed to a low value;
\item proceeds to the mall parking lot, proposing intermediate stops to shops
with possible interesting offers for the customer.
\end{enumerate}

In any case the robot modulates its speed taking into account the number of detected people, to minimize the risk of collision.

\subsubsection{Sequence diagram}

\includegraphics[width=0.85\textwidth]{bagUseCase}


\subsubsection{Optimistic robot action sequence}
\begin{enumerate}
\item Go to shop's loading area
\item Approach customer
\item Start conversation
\item Ask to load bag
\item Ask if customer wants to lead
\item Follow customer
\item Ask To Unload
\item End conversation
\end{enumerate}

\subsection{Use Case 4.2: Customer refuses first robot proposal and accepts a different one}

This use case highlights how the robot is capable of
recovering from a failure by exploiting automatic reasoning.
Since the customer refuses the first offer proposed by the robot, instead of randomly proposing a new offer to her/him, the robot tries to understand the user's preferences.

Moreover, in this use case, the proactive nature of the robot's behavior (when allowed by security concerns) is also underlined: when no people are
moving around, the robot can decide to approach itself a customer.

\subsubsection{Use case description}

The sales manager of a cinema inside the mall needs to promote a special discount
for a movie. The discount is loaded by the manager into the 
knowledge base (KB) of the robot, that contains the list of all the active commercial offers.
The robot is also aware, in his persistent KB, of the
existence of other secondary discounts.

Since there are no people moving around the robot, it starts
waiting for customers by monitoring the scene. As soon as the robot
sees a potential user (moving at the right distance and at the right speed),
the robot intercepts the customer and it asks her/him if she/he is interested
in the special discount for the movie.

The user answers that she/he is not interested.
Then, the robot asks the user to slide her/his personal customer card in order to
obtain a different available discount, in accordance to the user's previous purchases.

After the card data has been read, the robot finds out that the customer is a woman and that she
has made many purchases in the personal care department. 
Thus, the robot, by analysing the list of all the active commercial offers,
infers that the special discount about a facial cream could be of interest
to her.

Once informed of the discount, the customer reveals
that she is interested in it and she asks the robot for directions to reach the specific
shop. The robot safely guides the customer to the shop.

\newpage

\subsubsection{Sequence diagram}

\begin{figure}[!h]

\includegraphics[width=0.75\textwidth]{offerReasoning}

\end{figure}



\subsubsection{Optimistic robot action sequence}
\begin{enumerate}
\item Approach customer
\item Start conversation
\item Propose main offer (in this use case we assume this fails)
\item Ask for the customer to identify himself by swiping the card
\item Find appropriate offer for user
\item Propose new offer to user
\item Ask customer to follow
\item Go to appropriate shop
\item Inform customer destination has been reached
\item End conversation
\end{enumerate}


\subsection{Use Case 4.3: Customer asks for directions in a crowded environment}

The goal of this use case is to remark that the robot must always be
aware of safety. The robot is not allowed to behave hazardously
in presence of humans.

\subsubsection{Use case description}

The robot has the objective to inform customers of available discounts.
The shopping mall is very crowded and, for safety
reasons, the robot decides that it should not move around, but
that is more convenient to wait
for users to approach it.

As soon as it detects a user, standing still at
the appropriate social distance and looking at her/him, the robot initiates
a conversation and it announces the available offers.

The user is interested in a listed offer
and she/he asks for directions to reach the shop offering a discount.
Since the robot cannot safely move due to the crowded environment, it
\begin{enumerate}
\item shows the user the desired path on its tablet;
\item informs the user that 20 meters away along the corridor she/he will find another robot,
that can provide more specific information, if needed.
\end{enumerate}

\noindent The human thanks the robot and proceeding to the next one in order to
receive further directions.

\subsubsection{Sequence diagrams}

\begin{figure}[!h]
\fbox{\begin{minipage}[t]{0.48\columnwidth}%
\begin{center}
\includegraphics[width=1\textwidth]{crowdedCaseA}
\par\end{center}

\begin{center}
\textit{Robot shows path on map}
\par\end{center}%
\end{minipage}}\hfill{}%
\fbox{\begin{minipage}[t]{0.48\columnwidth}%
\begin{center}
\includegraphics[width=1\columnwidth]{crowdedCaseB}
\par\end{center}

\begin{center}
\textit{Robot shows where next helper is}
\par\end{center}%
\end{minipage}}

%\protect\caption{Customer asks for directions in crowded environment}


\end{figure}



\subsubsection{Optimistic robot action sequence}

\textit{A human approaches the robot}
\begin{enumerate}
\item Start conversation
\item Ask if interested in offer XYZ
\item Ask if showing path on map is appropriate
\item Show path to shop on tablet
\item End conversation
\end{enumerate}


\subsection{Use Case 5.1: Proposing an ice cream to a child}

This use case serves to demonstrate the common sense reasoning capability
of the robot. Since it is not socially acceptable for the robot to guide
a child to a location without her/his parents permission, the robot
asks for the parent's permission before completing the task.

\subsubsection{Use case description}

The manager of an ice cream shop asks the robot to inform children about
a special offer. The robot looks around for children. When it detects
a child, the robot approaches her/him and it informs her/him
about the special offer. The child is passionate about having an ice cream, 
but, before guiding her/him to the ice cream shop, the robot
\begin{enumerate}
\item asks for the parent's authorization,
\item waits for the positive parent's reply.
\end{enumerate}

\noindent Once the parent agrees to allow the child to follow the robot, it proceeds
to the ice cream shop.

\subsubsection{Sequence diagrams}

\begin{figure}[!h]
\includegraphics[width=0.85\textwidth]{iceCreamA}
\protect\caption{Option A: Parents are near the child.}
\end{figure}


\begin{figure}[!h]
\includegraphics[width=0.85\textwidth]{iceCreamB}
\protect\caption{Option B - Parents are not near the child.}
\end{figure}



\subsubsection{Optimistic robot action sequence}
\begin{enumerate}
\item Approach child
\item Start conversation
\item Describe ice cream offer
\item Ask parents for permission
\item Ask child to follow
\item Go to IceCreamShop
\item Inform customer destination has been reached
\item End conversation
\end{enumerate}




\subsection{Robot actions}
\label{sec:robot_actions}

In this section, the actions that the robot has to perform in order to
accomplish its tasks are described.
For each action, the preconditions and the post conditions that must hold are
listed. 


\subparagraph{Approach Human(Human)}

:

\textit{Prec}: The human has been detected by sensors and is reachable.

\textit{Post}: The robot positions itself at a social distance from
the user, possibly in plain view and facing the human.

\textit{Description}: This action usually precedes starting a conversation


\subparagraph{AskHumanIfInHurry(Human)}

:

\textit{Prec}: The robot is carrying something belonging to the human,
the human asked to robot to lead

\textit{Post}: The fact that the human is in a hurry or not, is added
to the knowledge base.

\textit{Description}: This question is asked to understand if the
robot should move directly to the parking area or can show a few offers
during the way


\subparagraph{AskHumanToDeload(Human)}

:

\textit{Prec}: The robot is carrying something belonging to the human

\textit{Post}: The human's object is removed from the robot

\textit{Description}: If the human refuses to remove the object, a
manager should be notified.


\subparagraph{AskHumanToLoad(Human)}

:

\textit{Prec}: The robot is in conversation with the human

\textit{Post}: The human's bag is on top of the robot

\textit{Description}:


\subparagraph{AskHumanWhoLeads(Human)}

:

\textit{Prec}: The robot is carrying something belonging to the human

\textit{Post}: The fact that the human wants to lead, or the contrary,
is added to the knowledge base.

\textit{Description}: This question is asked to understand if the
robot must lead or follow the human

 


\subparagraph{End Conversation(Human)}

:

\textit{Prec}: Human and robot are engaged in conversation.

\textit{Post}: Human and robot are no longer engaged in conversation.

\textit{Description}: The robot follows a social protocol to end the
conversation (es: ``See you next time!'')


\subparagraph{Engage Conversation(Human)}

:

\textit{Prec}: Robot is in social range with human. Human can see
robot, robot is facing human.

\textit{Post}: Human and robot are engaged in conversation.

\textit{Description}: The robot follows a social protocol to start
the conversation (``Hello human'') and make sure the human is interested


\subparagraph{Goto(Destination)}

:

\textit{Prec}: There is a path to the destination.

\textit{Post}: The robot is now at(Destination)

\textit{Description}: The robot navigate in a socially aware way to
the desired location.

\input{conclu}


